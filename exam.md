## Банкова система за трансакции – Контролно 2
---

### **Цел**

Реализирайте система за банкови трансакции, която моделира преводи между сметки с процес на одобрение, използвайки съвременни практики в C++. Акцентът е върху безопасното управление на паметта, обработката на изключения и предефинирането на операции. **Не използвайте указатели директно, а през smart pointers.**

---

### **1. Основна функционалност**

#### **Управление на сметки**
- **Сметките** се зареждат от текстов файл при стартиране (пътят се подава като аргумент от командния ред). Всяка сметка има:
  - **Номер на сметка** (уникален идентификатор)
  - **Собственик** (текст, първо име и фамилия)
  - **Баланс** (число)
- **Презареждане на сметки:**  
  - С командата `reload` можете да презаредите сметките от файла по всяко време.  
  - Съществуващите сметки в паметта се обновяват, но чакащите трансакции запазват референциите си към оригиналните сметки до изпълнение или отказ.

#### **Трансакции**
- **Създаване:**  
  - Потребителят подава трансакция чрез CLI с източник, получател и сума.
  - Трансакцията се добавя в списък с чакащи и изисква одобрение.
- **Одобрение/Отказ:**  
  - Потребителят може да види чакащите трансакции и да одобри или откаже най-горната (най-старата).
  - При одобрение балансите се актуализират и трансакцията се премества в история (до 10 последни).
  - При отказ трансакцията не се изпълнява, но пак отива в историята.
- **История:**  
  - Запазват се последните 10 трансакции в памет. При добавяне на 11-та – най-старата се премахва.

---

### **2. Изисквания**

#### **Разделна компилация**
- Всеки клас трябва да е реализиран в отделна двойка .cpp и  .h файлове. main.cpp не трябва да съдържа клас дефиниции.
- Предайте само кода на програмата - (.cpp  и .h) файловете.

#### **Управление на паметта**
- **Без директни указатели!**
  - Използвайте `std::shared_ptr` за сметките, за да останат валидни, докато има референции в трансакции.
  - Използвайте `std::unique_ptr` за трансакции (те не се копират).
- **Своевременно освобождаване на памет**
  - Паметта на сметки и трансакции се освобождава веднага щом те вече не са необходими за изпълнение на програмата.
- **Без излишно копиране**
  - Трансакциите и сметките се пазят в паметта точно веднъж.

#### **Изключения**
Обработвайте следните грешки чрез **стандартни и собствени изключения**:
- Подаване на трансакция с невалидна/несъществуваща сметка - използвайте стандартен тип изключение
- Недостатъчна наличност по източника при одобрение - използвайте собствен тип изключение. Изключението трябва да се хвърля от член-фунцкията на класа "Сметка" за намаляване на баланса. След това изключение, програмата трябва да отпечата грешка, да премахне трансакцията без да я добавя в историята и да продължи нормално своето изпълнение.

#### **Предефиниране на операции**

- Предефинирайте `<<` за:
    - Печат на детайли за сметка (баланс, собственик)
    - Печат на детайли за трансакция (източник, получател, сума, статус)
- Предефинирайте `+=` и `-=` за увеличаване и намаляване на баланса в сметките.


### **3. CLI Команди и примери**

| Команда | Описание | Примерен изход |
| :-- | :-- | :-- |
| `submit <src> <dest> <amount>` | Създава нова трансакция (чакаща) | `Transaction 1 submitted (Pending).` |
| `pending` | Извежда всички чакащи трансакции, в реда в който са подадени | `ACC123 → ACC456: $500.50 (Pending)` |
| `approve` | Одобрява  и изпълнява първата (най-старата) трансакция | `Transaction 1 approved. Balances updated.` |
| `decline` | Отказва трансакция най-първата трансакция | `Transaction 1 declined.` |
| `history` | Извежда последните 10 изпълнени трансакции | `1. [APPROVED] ACC123 -> ACC456: $500.50` |
| `reload` | Презарежда сметките от файл | `Accounts reloaded.` |
| `account <number>` | Показва баланс и собственик на сметка | `Account: ACC123\nOwner: John Doe\nBalance: $2500.00` |

#### **Примери за грешки**

```
> submit ACC999 ACC123 100.00
Error: Account ACC999 does not exist.

> approve 5
Error: Transaction 5 does not exist.

> approve 1
Error: Insufficient funds in account ACC123.
```

#### **Примерен файл със сметки**
```
ACC123 John Doe 2000
ACC456 Jane Doe 500
```