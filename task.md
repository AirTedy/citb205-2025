## **Задача: Система за управление на ресторантски поръчки**

### **Цел**

Да се реализира система за управление на поръчки в ресторант, предназначена за сервитьори, използвайки съвременни практики в C++. Системата трябва да управлява маси, меню и клиентски сметки, като гарантира сигурно управление на паметта и без използване на сурови указатели.

---

### **1. Стартиране и конфигуриране на програмата**

- **Аргументи от командния ред:**
    - Първи аргумент: Път до конфигурационен файл с брой маси (цяло число).
    - Втори аргумент: Път до файл с менюто.
- **Инициализация:**
    - Прочетете броя на масите от конфигурационния файл.
    - Заредете менюто от файла. Всеки артикул съдържа име и единична цена. Меню артикулите се държат в памет само веднъж.

---

### **2. Управление на маси и сметки**

- **Маси:** Номерирани от 1 до N (N се чете от конфигурационния файл).
- **Отваряне/затваряне на сметки:**
    - Сервитьорите могат да отварят сметка на всяка свободна маса (1–N).
    - След отваряне на сметка, могат да добавят артикули от менюто към сметката.
    - Сметката се затваря, масата се освобождава и поръчката се предава на касиера.
    - **При затваряне на сметка се отпечатва само номера на поръчката (order number), за да бъде използван по-късно. Касов бон не се отпечатва на този етап!**

---

### **3. Управление на менюто**

- **Файл с меню:**
    - Артикулите са с име и единична цена.
    - Менюто може да се презарежда по всяко време (например, след редакция на файла).
    - При презареждане, продуктите, които все още се използват в отворени сметки, остават в памет до тяхното затваряне.
- **Редакция на меню:**
    - Сервитьорът може да редактира меню файла и да го презареди без рестарт на програмата (например, при изчерпване на ястие).

---

### **4. Поръчки и процес на разплащане**

- **Checkout:**
    - При затваряне на сметка, тя се премахва от масата и се предава на касиера.
    - Касиерът управлява текущи и разплатени поръчки.
- **Касови бележки:**
    - Сервитьорите могат да отпечатват касов бон за поръчки в checkout **(чрез order number)**.
    - Поръчките се разплащат от касиера след плащане.
- **Управление на поръчки:**
    - **Поръчките не се копират.** Всяка поръчка съществува в памет само веднъж до разплащането.
    - След разплащане, поръчката се записва на диск (файл) и се премахва от паметта.
- **Запазване на последните 10 разплатени поръчки:**
    - Системата трябва да пази последните 10 разплатени поръчки в паметта за бърза справка.
    - Използвайте структура с фиксиран размер за целта.
    - При нова разплатена поръчка, добавете я и ако станат повече от 10, премахнете най-старата.
    - Реализирайте команда `print_last_settled` за извеждане на тези поръчки от най-новата към най-старата.

---

### **5. Управление на паметта**

- **Без raw указатели!**
    - Използвайте `std::unique_ptr` за изключителна собственост (например, поръчки) и `std::shared_ptr` за споделени артикули от менюто.
---

### **6. Изключения (Exception Handling)**

Използвайте **стандартни и собствени изключения** за следните грешки:


| Сценарий | Тип изключение | Примерно съобщение |
| :-- | :-- | :-- |
| Отваряне на сметка на заета маса | `TableOccupiedException` (custom) | `Error: Table 3 is already in use.` |
| Затваряне на сметка на свободна маса | `TableFreeException` (custom) | `Error: Table 5 has no open check.` |
| Добавяне на несъществуващ продукт | `std::out_of_range` (standard) | `Error: Product 99 does not exist.` |
| Разплащане/отпечатване на вече разплатена/несъществуваща поръчка | `OrderAlreadySettledException` (custom) | `Error: Order 101 is settled.` |

- Наследявайте собствените изключения от `std::runtime_error`.
- Хващайте изключенията на ниво CLI и извеждайте подходящи съобщения.

---

### **7. Предефиниране на операции (Operator Overloading)**

Предефинирайте следните операци:

- **Вмъкване в поток (`operator<<`)**
    - За отпечатване на касови бележки, поръчки и артикули от менюто.

```cpp
cout << checkout.get(124);
```

- **Аритметични операции (`operator+=`, `operator-=`)**
    - За добавяне/премахване на артикули/количество към/от сметка.

```cpp
table += menu.getItem(3);
```
---

### **8. CLI Команди и Примери за Изход**

#### **Команди за сервитьори**

- `open <table_number>`
    - Пример: `open 3`
    - Изход: `Check opened on table 3.`
или
`Error: Table 3 is already in use.`
- `add <table_number> <product_number> <quantity>`
    - Пример: `add 3 5 2`
    - Изход: `Added 2 x ProductName to table 3.`
или
`Error: Product 5 does not exist.`
- `close <table_number>`
    - Пример: `close 3`
    - Изход: `Check closed on table 3. Order number: 101.`
или
`Error: Table 3 has no open check.`


#### **Команди за касиер**

- `receipt <order_id>`
    - Пример: `receipt 101`
    - Изход:

```
Receipt for order 101:
Table: 3
Items:
  - ProductName x2 @ $10.00
Total: $20.00
```

или
`Error: Order 101 is already settled or does not exist.`
- `settle <order_id>`
    - Пример: `settle 101`
    - Изход: `Order 101 settled and archived.`
или
`Error: Order 101 is already settled or does not exist.`
- `totals`
    - Изход:

```
Outstanding orders total: $150.00
Settled orders total: $1200.00
```

- `last`
    - Изход:

```
Last 10 settled orders:
1. Order 105: $45.00 (Table 7)
2. Order 104: $30.00 (Table 2)
...
```


#### **Команда за меню**

- `reload`
    - Изход: `Menu reloaded successfully.`

